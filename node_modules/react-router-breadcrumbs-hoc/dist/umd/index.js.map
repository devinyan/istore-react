{"version":3,"file":"index.js","sources":["../../node_modules/decamelize/index.js","../../node_modules/humanize-string/index.js","../../src/index.js"],"sourcesContent":["'use strict';\nmodule.exports = function (str, sep) {\n\tif (typeof str !== 'string') {\n\t\tthrow new TypeError('Expected a string');\n\t}\n\n\tsep = typeof sep === 'undefined' ? '_' : sep;\n\n\treturn str\n\t\t.replace(/([a-z\\d])([A-Z])/g, '$1' + sep + '$2')\n\t\t.replace(/([A-Z]+)([A-Z][a-z\\d]+)/g, '$1' + sep + '$2')\n\t\t.toLowerCase();\n};\n","'use strict';\nvar decamelize = require('decamelize');\n\nmodule.exports = function (str) {\n\tif (typeof str !== 'string') {\n\t\tthrow new TypeError('Expected a string');\n\t}\n\n\tstr = decamelize(str);\n\tstr = str.toLowerCase().replace(/[_-]+/g, ' ').replace(/\\s{2,}/g, ' ').trim();\n\tstr = str.charAt(0).toUpperCase() + str.slice(1);\n\n\treturn str;\n};\n","import { createElement } from 'react';\nimport { matchPath, withRouter } from 'react-router';\nimport humanizeString from 'humanize-string';\n\nconst DEFAULT_MATCH_OPTIONS = { exact: true };\nconst NO_BREADCRUMB = 'NO_BREADCRUMB';\n\n// renders and returns the breadcrumb complete with `match`, `location`, and `key` props\nconst render = ({ breadcrumb, match, location }) => {\n  const componentProps = { match, location, key: match.path };\n  if (typeof breadcrumb === 'function') {\n    return createElement(breadcrumb, componentProps);\n  }\n  return createElement('span', componentProps, breadcrumb);\n};\n\n// small helper method to get a default `humanize-string` breadcrumb if the\n// user hasn't provided one\nconst getDefaultBreadcrumb = ({ pathSection, currentSection, location }) => {\n  const match = matchPath(pathSection, { ...DEFAULT_MATCH_OPTIONS, path: pathSection });\n\n  return render({\n    breadcrumb: humanizeString(currentSection),\n    match,\n    location,\n  });\n};\n\n// loops through the route array (if provided) and returns either\n// a user-provided breadcrumb OR a sensible default via `humanize-string`\nconst getBreadcrumb = ({\n  currentSection,\n  disableDefaults,\n  excludePaths,\n  location,\n  pathSection,\n  routes,\n}) => {\n  let breadcrumb;\n\n  // check the optional `exludePaths` option in `options` to see if the\n  // current path should not include a breadcrumb\n  if (excludePaths && excludePaths.includes(pathSection)) {\n    return NO_BREADCRUMB;\n  }\n\n  // loop through the route array and see if the user has provided a custom breadcrumb\n  routes.some(({ breadcrumb: userProvidedBreadcrumb, matchOptions, path }) => {\n    if (!path) {\n      throw new Error('withBreadcrumbs: `path` must be provided in every route object');\n    }\n\n    const match = matchPath(pathSection, { ...(matchOptions || DEFAULT_MATCH_OPTIONS), path });\n\n    // if user passed breadcrumb: null OR custom match options to suppress a breadcrumb\n    // we need to know NOT to add it to the matches array\n    // see: `if (breadcrumb !== NO_BREADCRUMB)` below\n    if ((match && userProvidedBreadcrumb === null) || (!match && matchOptions)) {\n      breadcrumb = NO_BREADCRUMB;\n      return true;\n    }\n\n    if (match) {\n      // this covers the case where a user may be extending their react-router route\n      // config with breadcrumbs, but also does not want default breadcrumbs to be\n      // automatically generated (opt-in)\n      if (!userProvidedBreadcrumb && disableDefaults) {\n        breadcrumb = NO_BREADCRUMB;\n        return true;\n      }\n\n      breadcrumb = render({\n        // although we have a match, the user may be passing their react-router config object\n        // which we support. The route config object may not have a `breadcrumb` param specified.\n        // If this is the case, we should provide a default via `humanizeString`\n        breadcrumb: userProvidedBreadcrumb || humanizeString(currentSection),\n        match,\n        location,\n      });\n      return true;\n    }\n    return false;\n  });\n\n  if (breadcrumb) {\n    // user provided a breadcrumb prop, or we generated one via humanizeString above ~L75\n    return breadcrumb;\n  } else if (disableDefaults) {\n    // if there was no breadcrumb provided and user has disableDefaults turned on\n    return NO_BREADCRUMB;\n  }\n\n  // if the above conditionals don't fire, generate a default breadcrumb based on the path\n  return getDefaultBreadcrumb({\n    pathSection,\n    // include a \"Home\" breadcrumb by default (can be overrode or disabled in config)\n    currentSection: pathSection === '/' ? 'Home' : currentSection,\n    location,\n  });\n};\n\nexport const getBreadcrumbs = ({ routes, location, options = {} }) => {\n  const matches = [];\n  const { pathname } = location;\n\n  pathname\n    .split('?')[0]\n    // remove trailing slash \"/\" from pathname\n    .replace(/\\/$/, '')\n    // split pathname into sections\n    .split('/')\n    // reduce over the sections and find matches from `routes` prop\n    .reduce((previousSection, currentSection) => {\n      // combine the last route section with the currentSection\n      // ex `pathname = /1/2/3 results in match checks for\n      // `/1`, `/1/2`, `/1/2/3`\n      const pathSection = !currentSection ? '/' : `${previousSection}/${currentSection}`;\n\n      const breadcrumb = getBreadcrumb({\n        currentSection,\n        location,\n        pathSection,\n        routes,\n        ...options,\n      });\n\n      // add the breadcrumb to the matches array\n      // unless the user has explicitly passed { path: x, breadcrumb: null } to disable\n      if (breadcrumb !== NO_BREADCRUMB) {\n        matches.push(breadcrumb);\n      }\n\n      return pathSection === '/' ? '' : pathSection;\n    }, null);\n\n  return matches;\n};\n\n// takes a route array and recursively flattens it IF there are\n// nested routes in the config\nconst flattenRoutes = routes => routes.reduce((arr, route) => {\n  if (route.routes) {\n    return arr.concat([route, ...flattenRoutes(route.routes)]);\n  }\n  return arr.concat(route);\n}, []);\n\nconst withBreadcrumbs = (routes = [], options) => Component => withRouter(props =>\n  createElement(Component, {\n    ...props,\n    breadcrumbs: getBreadcrumbs({\n      routes: flattenRoutes(routes),\n      location: props.location,\n      options,\n    }),\n  }));\n\nexport default withBreadcrumbs;\n"],"names":["DEFAULT_MATCH_OPTIONS","exact","NO_BREADCRUMB","render","breadcrumb","match","location","componentProps","key","path","createElement","getDefaultBreadcrumb","pathSection","currentSection","matchPath","humanizeString","getBreadcrumb","disableDefaults","excludePaths","routes","includes","some","userProvidedBreadcrumb","matchOptions","Error","getBreadcrumbs","options","matches","pathname","split","replace","reduce","previousSection","push","flattenRoutes","arr","route","concat","withBreadcrumbs","withRouter","Component","props","breadcrumbs"],"mappings":"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"}